<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert object to mesh object — as.mesh3d • rgl</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Convert object to mesh object — as.mesh3d" />
<meta property="og:description" content="The as.mesh3d generic function converts various objects
to mesh3d objects.
The default method takes takes a matrix of vertices 
as input and (optionally) merges repeated vertices, producing a mesh3d
object as output.  It will contain either triangles or quads or segments or points
according to the type argument.
If the generic is called without any argument, it will pass
all RGL ids from the current scene to the 
as.mesh3d.rglId method." />


<meta name="robots" content="noindex">



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- dependencies from examples -->
<script src="libs/htmlwidgets-1.5.3.9000/htmlwidgets.js"></script>
<script src="libs/rglWebGL-binding-0.107.9/rglWebGL.js"></script>
<link href="libs/rglwidgetClass-0.107.9/rgl.css" rel="stylesheet" />
<script src="libs/rglwidgetClass-0.107.9/rglClass.min.js"></script>
<script src="libs/CanvasMatrix4-0.107.9/CanvasMatrix.min.js"></script>

  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rgl</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.107.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/rgl.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../rglClass/index.html">Javascript</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/WebGL.html">User Interaction in WebGL (updated)</a>
    </li>
    <li>
      <a href="../articles/pkgdown.html">Using RGL in pkgdown web sites</a>
    </li>
    <li>
      <a href="../articles/transparency.html">A Note on Transparency</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dmurdoch/rgl/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert object to mesh object</h1>
    
    <div class="hidden name"><code>as.mesh3d.default.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>as.mesh3d</code> generic function converts various objects
to <code><a href='mesh3d.html'>mesh3d</a></code> objects.</p>
<p>The default method takes takes a matrix of vertices 
as input and (optionally) merges repeated vertices, producing a <code><a href='mesh3d.html'>mesh3d</a></code>
object as output.  It will contain either triangles or quads or segments or points
according to the <code>type</code> argument.</p>
<p>If the generic is called without any argument, it will pass
all RGL ids from the current scene to the 
<code><a href='as.mesh3d.rglId.html'>as.mesh3d.rglId</a></code> method.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>as.mesh3d</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for default</span>
<span class='fu'>as.mesh3d</span><span class='op'>(</span><span class='va'>x</span>, y <span class='op'>=</span> <span class='cn'>NULL</span>, z <span class='op'>=</span> <span class='cn'>NULL</span>, 
             type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"triangles"</span>, <span class='st'>"quads"</span>, <span class='st'>"segments"</span>, <span class='st'>"points"</span><span class='op'>)</span>,
             smooth <span class='op'>=</span> <span class='cn'>FALSE</span>, 
             tolerance <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>.Machine</span><span class='op'>$</span><span class='va'>double.eps</span><span class='op'>)</span>, 
             notEqual <span class='op'>=</span> <span class='cn'>NULL</span>, 
             merge <span class='op'>=</span> <span class='cn'>TRUE</span>,
             <span class='va'>...</span>,
             <span class='va'>triangles</span><span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x, y, z</th>
      <td><p>For the generic, <code>x</code> is the object to convert.
For the default method, <code>x</code>, <code>y</code> and <code>z</code> are
coordinates. Any reasonable way of defining the coordinates is
acceptable. See the function <code><a href='https://rdrr.io/r/grDevices/xyz.coords.html'>xyz.coords</a></code> for details.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>What type of things should be in the mesh?  Tries
this list in order until it finds one that works.</p></td>
    </tr>
    <tr>
      <th>smooth</th>
      <td><p>If <code>TRUE</code>, <code><a href='addNormals.html'>addNormals</a></code> will be called on the mesh
object to make it render smoothly.</p></td>
    </tr>
    <tr>
      <th>tolerance</th>
      <td><p>The numerical tolerance to be used in <code><a href='https://rdrr.io/r/base/all.equal.html'>all.equal</a></code> to
determine whether two vertices should be merged.</p></td>
    </tr>
    <tr>
      <th>notEqual</th>
      <td><p>If not <code>NULL</code>, an n by n matrix of logical values, where n is the
number of vertices as input.  <code>TRUE</code> entries indicate that the
corresponding pair of vertices should not be merged even if they appear equal.</p></td>
    </tr>
    <tr>
      <th>merge</th>
      <td><p>Should apparently equal vertices be merged?</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Material properties to pass to <code><a href='mesh3d.html'>tmesh3d</a></code> or <code><a href='mesh3d.html'>qmesh3d</a></code>.</p></td>
    </tr>
    <tr>
      <th>triangles</th>
      <td><p>Deprecated.  If present, <code>TRUE</code> indicates <code>type = "triangles"</code> and <code>FALSE</code> indicates <code>type = "quads"</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The motivation for this function is the following problem:  I was
asked whether RGL could render a surface made up of triangles or 
quadrilaterals to look smooth.  It can do that, but needs normals at 
each vertex; they should be the average of the normals for each polygon 
sharing that vertex.  Then OpenGL will interpolate the normals across 
the polygons and give the illusion of smoothness.</p>
<p>To do this, it needs to know which polygons share each vertex.  If the 
surface is described as a list of triangles or quadrilaterals, that 
means identifying vertices that are in multiple polygons, and converting 
the representation to a <code>"<a href='mesh3d.html'>mesh3d</a>"</code> object (which is a matrix of vertices 
and a matrix of vertex numbers making up triangles or quads).  Then the 
<code><a href='addNormals.html'>addNormals</a></code> function will add the normals.</p>
<p>Sometimes two polygons will share vertices (within numerical 
tolerance) without the user wanting them to be considered internal to 
the surface, or might want one sharp edge in an otherwise smooth 
surface.  This means I needed a way to declare that two vertices from 
the original list of vertices in the triangles or quads are "not equal", 
even when they test numerically equal.  That's what the <code>notEqual</code> matrix specifies.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>"<a href='mesh3d.html'>mesh3d</a>"</code> object with the same faces as in the 
input, but (if <code>merge=TRUE</code>) with vertices that test equal to
within <code>tolerance</code> merged.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Duncan Murdoch</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='va'>xyz</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span>,</span>
<span class='r-in'>                <span class='op'>-</span><span class='fl'>1</span>,  <span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span>,</span>
<span class='r-in'>                 <span class='fl'>1</span>,  <span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span>,</span>
<span class='r-in'>                 <span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span>,</span>
<span class='r-in'>                <span class='op'>-</span><span class='fl'>1</span>,  <span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span>,</span>
<span class='r-in'>                <span class='op'>-</span><span class='fl'>1</span>,  <span class='fl'>1</span>,  <span class='fl'>1</span>,</span>
<span class='r-in'>                 <span class='fl'>1</span>,  <span class='fl'>1</span>,  <span class='fl'>1</span>,</span>
<span class='r-in'>                 <span class='fl'>1</span>,  <span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span>,</span>
<span class='r-in'>                 <span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span>,</span>
<span class='r-in'>                 <span class='fl'>1</span>,  <span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span>,</span>
<span class='r-in'>                 <span class='fl'>1</span>,  <span class='fl'>1</span>,  <span class='fl'>1</span>,</span>
<span class='r-in'>                 <span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span>,  <span class='fl'>1</span><span class='op'>)</span>, byrow <span class='op'>=</span> <span class='cn'>TRUE</span>, ncol <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>mesh</span> <span class='op'>&lt;-</span> <span class='fu'>as.mesh3d</span><span class='op'>(</span><span class='va'>xyz</span>, type <span class='op'>=</span> <span class='st'>"quads"</span>, col <span class='op'>=</span> <span class='st'>"red"</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>mesh</span><span class='op'>$</span><span class='va'>vb</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>      [,1] [,2] [,3] [,4] [,5] [,6] [,7]</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1,]   -1   -1    1    1   -1    1    1</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [2,]   -1    1    1   -1    1    1   -1</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [3,]   -1   -1   -1   -1    1    1    1</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [4,]    1    1    1    1    1    1    1</span>
<span class='r-in'><span class='va'>mesh</span><span class='op'>$</span><span class='va'>ib</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>      [,1] [,2] [,3]</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1,]    1    2    4</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [2,]    2    5    3</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [3,]    3    6    6</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [4,]    4    3    7</span>
<span class='r-in'><span class='fu'><a href='open3d.html'>open3d</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='shade3d.html'>shade3d</a></span><span class='op'>(</span><span class='va'>mesh</span><span class='op'>)</span></span>
<div id="rgl17158" style="width:480px;height:480px;" class="rglWebGL html-widget"></div>
<script type="application/json" data-for="rgl17158">{"x":{"material":{"color":"#000000","alpha":1,"lit":true,"ambient":"#000000","specular":"#FFFFFF","emission":"#000000","shininess":50,"smooth":true,"front":"filled","back":"filled","size":3,"lwd":1,"fog":true,"point_antialias":false,"line_antialias":false,"texture":null,"textype":"rgb","texmipmap":false,"texminfilter":"linear","texmagfilter":"linear","texenvmap":false,"depth_mask":true,"depth_test":"less","isTransparent":false,"polygon_offset":[0,0],"margin":"","floating":false},"rootSubscene":106,"objects":{"112":{"id":112,"type":"quads","material":{},"vertices":[[-1,-1,-1],[-1,1,-1],[1,1,-1],[1,-1,-1],[-1,1,-1],[-1,1,1],[1,1,1],[1,1,-1],[1,-1,-1],[1,1,-1],[1,1,1],[1,-1,1]],"colors":[[1,0,0,1]],"centers":[[0,0,-1],[0,1,0],[1,0,0]],"normals":[[0,0,-1],[0,0,-1],[0,0,-1],[0,0,-1],[-0,1,0],[-0,1,0],[-0,1,0],[-0,1,0],[1,0,-0],[1,0,-0],[1,0,-0],[1,0,-0]],"ignoreExtent":false,"flags":32771},"110":{"id":110,"type":"light","vertices":[[0,0,1]],"colors":[[1,1,1,1],[1,1,1,1],[1,1,1,1]],"viewpoint":true,"finite":false},"109":{"id":109,"type":"background","material":{},"colors":[[0.298039227724075,0.298039227724075,0.298039227724075,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"111":{"id":111,"type":"background","material":{"lit":false,"back":"lines"},"colors":[[1,1,1,1]],"centers":[[0,0,0]],"sphere":false,"fogtype":"none","fogscale":1,"flags":32768},"106":{"id":106,"type":"subscene","par3d":{"antialias":8,"FOV":30,"ignoreExtent":false,"listeners":106,"mouseMode":{"none":"none","left":"trackball","right":"zoom","middle":"fov","wheel":"pull"},"observer":[0,0,6.69213056564331],"modelMatrix":[[1,0,0,0],[0,0.342020153999329,0.939692616462708,0],[0,-0.939692616462708,0.342020153999329,-6.69213056564331],[0,0,0,1]],"projMatrix":[[3.73205089569092,0,0,0],[0,3.73205089569092,0,0],[0,0,-3.86370348930359,-24.1243553161621],[0,0,-1,0]],"skipRedraw":false,"userMatrix":[[1,0,0,0],[0,0.342020143325668,0.939692620785909,0],[0,-0.939692620785909,0.342020143325668,0],[0,0,0,1]],"userProjection":[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],"scale":[1,1,1],"viewport":{"x":0,"y":0,"width":1,"height":1},"zoom":1,"bbox":[-1,1,-1,1,-1,1],"windowRect":[140,185,396,441],"family":"sans","font":1,"cex":1,"useFreeType":true,"fontname":"/Library/Frameworks/R.framework/Versions/4.1/Resources/library/rgl/fonts/FreeSans.ttf","maxClipPlanes":6,"glVersion":2.1,"activeSubscene":0},"embeddings":{"viewport":"replace","projection":"replace","model":"replace","mouse":"replace"},"objects":[111,112,110],"subscenes":[],"flags":33027}},"crosstalk":{"key":[],"group":[],"id":[],"options":[]},"width":480,"height":480,"context":{"shiny":false,"rmarkdown":null},"players":[],"webGLoptions":{"preserveDrawingBuffer":true}},"evals":[],"jsHooks":[]}</script><span class='r-in'></span>
<span class='r-in'><span class='co'># Stop vertices 2 and 5 from being merged</span></span>
<span class='r-in'><span class='va'>notEQ</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='cn'>FALSE</span>, <span class='fl'>12</span>, <span class='fl'>12</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>notEQ</span><span class='op'>[</span><span class='fl'>2</span>, <span class='fl'>5</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='cn'>TRUE</span></span>
<span class='r-in'><span class='va'>mesh</span> <span class='op'>&lt;-</span> <span class='fu'>as.mesh3d</span><span class='op'>(</span><span class='va'>xyz</span>, type <span class='op'>=</span> <span class='st'>"quads"</span>, notEqual <span class='op'>=</span> <span class='va'>notEQ</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>mesh</span><span class='op'>$</span><span class='va'>vb</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1,]   -1   -1    1    1   -1   -1    1    1</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [2,]   -1    1    1   -1    1    1    1   -1</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [3,]   -1   -1   -1   -1   -1    1    1    1</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [4,]    1    1    1    1    1    1    1    1</span>
<span class='r-in'><span class='va'>mesh</span><span class='op'>$</span><span class='va'>ib</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>      [,1] [,2] [,3]</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1,]    1    5    4</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [2,]    2    6    3</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [3,]    3    7    7</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [4,]    4    3    8</span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by <a href="https://github.com/dmurdoch" class="external-link">Duncan Murdoch</a>, <a href="http://neoscientists.org/~plex/" class="external-link">Daniel Adler</a>.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


