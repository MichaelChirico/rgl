<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Clip mesh or rgl object to general region — clipMesh3d • rgl</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Clip mesh or rgl object to general region — clipMesh3d" />
<meta property="og:description" content="Modifies a mesh3d object so that values of 
a function are bounded." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rgl</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.106.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/rgl.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/WebGL.html">User Interaction in WebGL (updated)</a>
    </li>
    <li>
      <a href="../articles/transparency.html">A Note on Transparency</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dmurdoch/rgl/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Clip mesh or <span class="pkg">rgl</span> object to general region</h1>
    
    <div class="hidden name"><code>clipMesh3d.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Modifies a mesh3d object so that values of 
a function are bounded.</p>
    </div>

    <pre class="usage"><span class='fu'>clipMesh3d</span><span class='op'>(</span><span class='va'>mesh</span>, <span class='va'>fn</span>, bound <span class='op'>=</span> <span class='fl'>0</span>, greater <span class='op'>=</span> <span class='cn'>TRUE</span>, 
           minVertices <span class='op'>=</span> <span class='fl'>0</span>, plot <span class='op'>=</span> <span class='cn'>FALSE</span>, keepValues <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'>clipObj3d</span><span class='op'>(</span><span class='va'>ids</span>, <span class='va'>fn</span>, bound <span class='op'>=</span> <span class='fl'>0</span>, greater <span class='op'>=</span> <span class='cn'>TRUE</span>,
           minVertices <span class='op'>=</span> <span class='fl'>0</span>,
           replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>mesh</th>
      <td><p>A <code><a href='mesh3d.html'>mesh3d</a></code> object.</p></td>
    </tr>
    <tr>
      <th>fn</th>
      <td><p>A function used to determine clipping, or a vector of values from such
a function, with one value per vertex.</p></td>
    </tr>
    <tr>
      <th>bound</th>
      <td><p>The value(s) of <code>fn</code> on the clipping boundary.</p></td>
    </tr>
    <tr>
      <th>greater</th>
      <td><p>Logical; whether to keep <code>fn &gt;= bound</code> or not.</p></td>
    </tr>
    <tr>
      <th>minVertices</th>
      <td><p>See Details below.</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>Logical; whether or not to plot the mesh.</p></td>
    </tr>
    <tr>
      <th>keepValues</th>
      <td><p>Logical; whether to save the function values at 
  each vertex when <code>plot = FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>ids</th>
      <td><p>The <span class="pkg">rgl</span> id value(s) of objects to clip.</p></td>
    </tr>
    <tr>
      <th>replace</th>
      <td><p>Should the <code>ids</code> objects be deleted after the clipped
ones are drawn?</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>These functions transform a mesh3d object or other
rgl objects by removing parts where <code>fn</code> violates
the bound.</p>
<p>For <code>clipMesh3d</code> the <code>fn</code> argument can be any
of the following:</p><ul>
<li><p>a character vector naming a function (with special
names <code>"x"</code>, <code>"y"</code>, and <code>"z"</code> corresponding
to functions returning those coordinates)</p></li>
<li><p>a function</p></li>
<li><p>a numeric vector with one value per vertex</p></li>
<li><p><code>NULL</code>, indicating that the numeric values
are saved in <code>mesh$values</code></p></li>
</ul><p>For <code>clipObj3d</code> any of the above except <code>NULL</code>
may be used.</p>
<p>If <code>fn</code>
is a numeric vector, with one value per vertex, those values will be
used in the test.
If it is a function with formal arguments <code>x</code>,
<code>y</code> and <code>z</code>, it will receive the coordinates of 
vertices in those arguments, otherwise it will receive 
the coordinates in a single n x 3 matrix.   The function
should be vectorized and return one value per vertex, 
to check against the bound.</p>
<p>These operations are performed on the mesh:</p>
<p>First, all quads are converted to triangles.</p>
<p>Next, each vertex is checked against the condition.</p>
<p>Modifications to triangles depend
on how many of the vertices satisfy the condition 
(<code>fn &gt;= bound</code> or <code>fn &lt;= bound</code>, depending on <code>greater</code>)
for inclusion.</p><ul>
<li><p>If no vertices in a triangle satisfy the condition, the triangle is omitted.</p></li>
<li><p>If one vertex satisfies the condition, the other two vertices
in that triangle are shrunk towards it by assuming <code>fn</code>
is locally linear.</p></li>
<li><p>If two vertices satisfy the condition, the third vertex
is shrunk along each edge towards each other vertex, forming a
quadrilateral made of two new triangles.</p></li>
<li><p>If all vertices satisfy the condition, they are included
with no modifications.</p></li>
</ul><p>Modifications to line segments are similar:  the segment
will be shortened if it crosses the boundary, or omitted
if it is entirely out of bounds.  Points, spheres, text
and sprites will just be kept or rejected.</p>
<p>The <code>minVertices</code> argument is used to improve the 
approximation to the boundary when <code>fn</code> is a non-linear
function.  In that case, the interpolation described above
can be inaccurate.  If <code>minVertices</code> is set to a
positive
number (e.g. <code>10000</code>), then each object is modified
by subdivision to have at least that number of vertices, 
so that pieces are smaller and the linear interpolation
is more accurate.  In the <code>clipObj3d</code> function, 
<code>minVertices</code> can be a vector, with entries corresponding
to each of the entries in <code>ids</code>.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If <code>plot = FALSE</code>,
<code>clipMesh3d</code> returns new mesh3d object in which all vertices (approximately) satisfy the
clipping condition.  Note that the order of vertices will likely
differ from the original order, and new vertices will be added near
the boundary (and if <code>minVertices &gt; 0</code>, in the 
interior).  If in addition <code>keepValues = TRUE</code>,
a component named <code>"values"</code> will be added to the 
mesh containing the values for each vertex.</p>
<p>If <code>plot = TRUE</code>, the result will be 
plotted with <code><a href='mesh3d.html'>shade3d</a></code> and its result returned.</p>
<p><code>clipObj3d</code> is called for the side effect of modifying
the scene.  It returns a list of new <span class="pkg">rgl</span> id values
corresponding to the <code>ids</code> passed as arguments.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Duncan Murdoch</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>See <a href='https://stackoverflow.com/q/56242470/2554330'>https://stackoverflow.com/q/56242470/2554330</a> for a
motivating example.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>See <code><a href='contourLines3d.html'>contourLines3d</a></code> and
<code><a href='contourLines3d.html'>filledContour3d</a></code> for ways to display function 
values without clipping.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># Show the problem that minVertices solves:</span>

<span class='va'>cube</span> <span class='op'>&lt;-</span> <span class='fu'><a href='mesh3d.html'>cube3d</a></span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>"red"</span><span class='op'>)</span>

<span class='co'># This function only has one argument, so it will </span>
<span class='co'># be passed x, y and z in columns of a matrix</span>
<span class='va'>vecnorm</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>vals</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='va'>vals</span>, <span class='fl'>1</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>row</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>row</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'><a href='open3d.html'>open3d</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; null 
#&gt;   22 </div><div class='input'><span class='fu'><a href='mfrow3d.html'>mfrow3d</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>2</span>, sharedMouse <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>id1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='mesh3d.html'>shade3d</a></span><span class='op'>(</span><span class='va'>cube</span><span class='op'>)</span>
<span class='co'># All vertices have norm sqrt(3), so this clips nothing:</span>
<span class='fu'>clipObj3d</span><span class='op'>(</span><span class='va'>id1</span>, fn <span class='op'>=</span> <span class='va'>vecnorm</span>, bound <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='mfrow3d.html'>next3d</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>id2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='mesh3d.html'>wire3d</a></span><span class='op'>(</span><span class='va'>cube</span>, lit <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'>clipObj3d</span><span class='op'>(</span><span class='va'>id2</span>, fn <span class='op'>=</span> <span class='va'>vecnorm</span>, bound <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># This subdivides the cube, and does proper clipping:</span>
<span class='fu'><a href='mfrow3d.html'>next3d</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>id3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='mesh3d.html'>shade3d</a></span><span class='op'>(</span><span class='va'>cube</span><span class='op'>)</span>
<span class='fu'>clipObj3d</span><span class='op'>(</span><span class='va'>id3</span>, fn <span class='op'>=</span> <span class='va'>vecnorm</span>, bound <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span>, minVertices <span class='op'>=</span> <span class='fl'>200</span><span class='op'>)</span>
<span class='fu'><a href='mfrow3d.html'>next3d</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>id4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='mesh3d.html'>wire3d</a></span><span class='op'>(</span><span class='va'>cube</span>, lit <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'>clipObj3d</span><span class='op'>(</span><span class='va'>id4</span>, fn <span class='op'>=</span> <span class='va'>vecnorm</span>, bound <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>)</span>, minVertices <span class='op'>=</span> <span class='fl'>200</span><span class='op'>)</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/dmurdoch'>Duncan Murdoch</a>, <a href='http://neoscientists.org/~plex/'>Daniel Adler</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


