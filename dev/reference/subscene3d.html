<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create, select or modify a subscene. — subscene3d • rgl</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create, select or modify a subscene. — subscene3d" />
<meta property="og:description" content="This creates a new subscene, or selects one by id value, or adds objects to one." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rgl</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.106.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/rgl.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/WebGL.html">User Interaction in WebGL (updated)</a>
    </li>
    <li>
      <a href="../articles/transparency.html">A Note on Transparency</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dmurdoch/rgl/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create, select or modify a subscene.</h1>
    
    <div class="hidden name"><code>subscene3d.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This creates a new subscene, or selects one by <code>id</code> value, or adds objects to one.</p>
    </div>

    <pre class="usage"><span class='fu'>newSubscene3d</span><span class='op'>(</span>viewport <span class='op'>=</span> <span class='st'>"replace"</span>, 
              projection <span class='op'>=</span> <span class='st'>"replace"</span>, 
              model <span class='op'>=</span> <span class='st'>"replace"</span>,
              mouseMode <span class='op'>=</span> <span class='st'>"inherit"</span>, 
              parent <span class='op'>=</span> <span class='fu'>currentSubscene3d</span><span class='op'>(</span><span class='op'>)</span>, 
              copyLights <span class='op'>=</span> <span class='cn'>TRUE</span>, 
              copyShapes <span class='op'>=</span> <span class='cn'>FALSE</span>, 
              copyBBoxDeco <span class='op'>=</span> <span class='va'>copyShapes</span>, 
              copyBackground <span class='op'>=</span> <span class='cn'>FALSE</span>, <span class='va'>newviewport</span>,
              <span class='va'>ignoreExtent</span><span class='op'>)</span>
<span class='fu'>currentSubscene3d</span><span class='op'>(</span>dev <span class='op'>=</span> <span class='fu'><a href='open3d.html'>cur3d</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>useSubscene3d</span><span class='op'>(</span><span class='va'>subscene</span><span class='op'>)</span>
<span class='fu'>addToSubscene3d</span><span class='op'>(</span><span class='va'>ids</span>, subscene <span class='op'>=</span> <span class='fu'>currentSubscene3d</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>delFromSubscene3d</span><span class='op'>(</span><span class='va'>ids</span>, subscene <span class='op'>=</span> <span class='fu'>currentSubscene3d</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>gc3d</span><span class='op'>(</span>protect <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>viewport, projection, model, mouseMode</th>
      <td><p>How should the new subscene be embedded?  Possible values are
<code><a href='https://rdrr.io/r/base/c.html'>c("inherit", "modify", "replace")</a></code>.  See Details below.</p></td>
    </tr>
    <tr>
      <th>parent</th>
      <td><p>The parent subscene (defaults to the current subscene).</p></td>
    </tr>
    <tr>
      <th>copyLights, copyShapes, copyBBoxDeco, copyBackground</th>
      <td><p>Whether lights, shapes, bounding box decorations and background should be copied to the new subscene.</p></td>
    </tr>
    <tr>
      <th>newviewport</th>
      <td><p>Optionally specify the new subscene's viewport (in pixels).</p></td>
    </tr>
    <tr>
      <th>ignoreExtent</th>
      <td><p>Whether to ignore the subscene's bounding box when calculating the parent bounding
box.  Defaults to <code>TRUE</code> if <code>model</code> is not <code>"inherit"</code>.</p></td>
    </tr>
    <tr>
      <th>dev</th>
      <td><p>Which rgl device to query for the current subscene.</p></td>
    </tr>
    <tr>
      <th>subscene</th>
      <td><p>Which subscene to use or modify.</p></td>
    </tr>
    <tr>
      <th>ids</th>
      <td><p>A vector of integer object ids to add to the subscene.</p></td>
    </tr>
    <tr>
      <th>protect</th>
      <td><p>Object ids to protect from this garbage collection.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The rgl package allows multiple windows to be open; each one corresponds to a &#8220;scene&#8221;.
Within each scene there are one or more &#8220;subscenes&#8221;.  Each subscene corresponds
to a rectangular region in the window, and may have its own projection, transformation and behaviour in response to 
the mouse.</p>
<p>There is always a current subscene:  most graphic operations make changes there, e.g. by adding
an object to it.</p>
<p>The scene &#8220;owns&#8221; objects; <code>addToSubscene3d</code> and <code>delFromSubscene3d</code> 
put their ids into or remove them from the list being displayed within a particular subscene.
The <code>gc3d</code> function deletes objects from the scene if they are not visible in any
subscene, unless they are protected by having their id included in <code>protect</code>.</p>
<p>The <code>viewport</code>, <code>projection</code> and <code>model</code> parameters each have three possible settings:
<code><a href='https://rdrr.io/r/base/c.html'>c("inherit", "modify", "replace")</a></code>.  <code>"inherit"</code> means that the corresponding value
from the parent subscene will be used.  <code>"replace"</code> means that the new subscene will
have its own value of the value, independent of its parent.  <code>"modify"</code> means that the 
child value will be applied first, and then the parent value will be applied.  For viewport, this
means that if the parent viewport is changed, the child will maintain its relative position.  For
the two matrices, <code>"modify"</code> is unlikely to give satisfactory results, but it is available
for possible use.</p>
<p>The <code>mouseMode</code> parameter 
can only be one of <code><a href='https://rdrr.io/r/base/c.html'>c("inherit", "replace")</a></code>.  If
it is <code>"inherit"</code>, the subscene will use the mouse
controls of the parent, and any change to them will
affect the parent and all children that inherit from it.
This is the behaviour that was present before <span class="pkg">rgl</span>
version 0.100.13.  If it is <code>"replace"</code>, then
it will receive a copy of the parent mouse controls,
but modifications to them will affect only this 
subscene, not the parent.  Note that this is orthogonal
to the <code><a href='par3d.html'>par3d</a>("listeners")</code> setting:
if another subscene is listed as a listener, it will respond
to mouse actions using the same mode as the one receiving
them.</p>
<p>The <code>viewport</code> parameter controls the rectangular region in which the subscene is displayed.
It is specified using <code>newviewport</code> (in pixels relative to the whole window), or set to 
match the parent viewport.</p>
<p>The <code>projection</code> parameter controls settings corresponding to the observer.  These
include the field of view and the zoom; they also include the position of the observer relative to
the model.  The <code><a href='par3d.html'>par3d("projMatrix")</a></code> matrix is determined by the projection.</p>
<p>The <code>model</code> parameter controls settings corresponding to the model.  Mouse rotations affect
the model, as does scaling.  The <code><a href='par3d.html'>par3d("modelMatrix")</a></code> matrix is determined by these as
well as by the position of the observer (since OpenGL assumes that the observer is at
(0, 0, 0) after the MODELVIEW transformation).  Only those parts concerning the model are
inherited when <code>model</code> specifies inheritance, the observer setting is controlled by
<code>projection</code>.</p>
<p>If <code>copyBackground</code> is <code>TRUE</code>, the background of the newly created child will
overwrite anything displayed in the parent subscene, regardless of depth.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If successful, each function returns the object id of the subscene, with the exception of
<code>gc3d</code>, which returns the count of objects which have been deleted, 
and <code>useSubscene3d</code>, which returns the previously active subscene id.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Duncan Murdoch and Fang He.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='subsceneInfo.html'>subsceneInfo</a></code> for information about a subscene, 
<code><a href='mfrow3d.html'>mfrow3d</a></code> and <code><a href='mfrow3d.html'>layout3d</a></code> to set up 
multiple panes of subscenes.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># Show the Earth with a cutout by using clipplanes in subscenes</span>

<span class='va'>lat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>90</span>, <span class='op'>-</span><span class='fl'>90</span>, len <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span><span class='op'>*</span><span class='va'>pi</span><span class='op'>/</span><span class='fl'>180</span>, <span class='fl'>50</span>, <span class='fl'>50</span>, byrow <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>long</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>180</span>, <span class='fl'>180</span>, len <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span><span class='op'>*</span><span class='va'>pi</span><span class='op'>/</span><span class='fl'>180</span>, <span class='fl'>50</span>, <span class='fl'>50</span><span class='op'>)</span>

<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fl'>6378.1</span> <span class='co'># radius of Earth in km</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='va'>r</span><span class='op'>*</span><span class='fu'><a href='https://rdrr.io/r/base/Trig.html'>cos</a></span><span class='op'>(</span><span class='va'>lat</span><span class='op'>)</span><span class='op'>*</span><span class='fu'><a href='https://rdrr.io/r/base/Trig.html'>cos</a></span><span class='op'>(</span><span class='va'>long</span><span class='op'>)</span>
<span class='va'>y</span> <span class='op'>&lt;-</span> <span class='va'>r</span><span class='op'>*</span><span class='fu'><a href='https://rdrr.io/r/base/Trig.html'>cos</a></span><span class='op'>(</span><span class='va'>lat</span><span class='op'>)</span><span class='op'>*</span><span class='fu'><a href='https://rdrr.io/r/base/Trig.html'>sin</a></span><span class='op'>(</span><span class='va'>long</span><span class='op'>)</span>
<span class='va'>z</span> <span class='op'>&lt;-</span> <span class='va'>r</span><span class='op'>*</span><span class='fu'><a href='https://rdrr.io/r/base/Trig.html'>sin</a></span><span class='op'>(</span><span class='va'>lat</span><span class='op'>)</span>

<span class='fu'><a href='open3d.html'>open3d</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; null 
#&gt;   88 </div><div class='input'><span class='va'>obj</span> <span class='op'>&lt;-</span> <span class='fu'><a href='surface3d.html'>surface3d</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span>, <span class='va'>z</span>, col <span class='op'>=</span> <span class='st'>"white"</span>, 
       texture <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"textures/worldsmall.png"</span>, package <span class='op'>=</span> <span class='st'>"rgl"</span><span class='op'>)</span>, 
       specular <span class='op'>=</span> <span class='st'>"black"</span>, axes <span class='op'>=</span> <span class='cn'>FALSE</span>, box <span class='op'>=</span> <span class='cn'>FALSE</span>, xlab <span class='op'>=</span> <span class='st'>""</span>, ylab <span class='op'>=</span> <span class='st'>""</span>, zlab <span class='op'>=</span> <span class='st'>""</span>,
       normal_x <span class='op'>=</span> <span class='va'>x</span>, normal_y <span class='op'>=</span> <span class='va'>y</span>, normal_z <span class='op'>=</span> <span class='va'>z</span><span class='op'>)</span>
       
<span class='va'>cols</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='st'>"chocolate4"</span>, <span class='fl'>4</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='st'>"burlywood1"</span>, <span class='fl'>4</span><span class='op'>)</span>, <span class='st'>"darkgoldenrod1"</span><span class='op'>)</span>
<span class='va'>rs</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>6350</span>, <span class='fl'>5639</span>, <span class='fl'>4928.5</span>, <span class='fl'>4207</span>, <span class='fl'>3486</span>, 
                         <span class='op'>(</span><span class='fl'>3486</span> <span class='op'>+</span> <span class='fl'>2351</span><span class='op'>)</span><span class='op'>/</span><span class='fl'>2</span>, <span class='fl'>2351</span>, <span class='op'>(</span><span class='fl'>2351</span> <span class='op'>+</span> <span class='fl'>1216</span><span class='op'>)</span><span class='op'>/</span><span class='fl'>2</span>, <span class='fl'>1216</span><span class='op'>)</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_along</a></span><span class='op'>(</span><span class='va'>rs</span><span class='op'>)</span><span class='op'>)</span> 
  <span class='va'>obj</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>obj</span>, <span class='fu'><a href='spheres3d.html'>spheres3d</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span>, col <span class='op'>=</span> <span class='va'>cols</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span>, radius <span class='op'>=</span> <span class='va'>rs</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>
  
<span class='va'>root</span> <span class='op'>&lt;-</span> <span class='fu'>currentSubscene3d</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>newSubscene3d</span><span class='op'>(</span><span class='st'>"inherit"</span>, <span class='st'>"inherit"</span>, <span class='st'>"inherit"</span>, copyShapes <span class='op'>=</span> <span class='cn'>TRUE</span>, parent <span class='op'>=</span> <span class='va'>root</span><span class='op'>)</span>
<span class='fu'><a href='planes3d.html'>clipplanes3d</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span>

<span class='fu'>newSubscene3d</span><span class='op'>(</span><span class='st'>"inherit"</span>, <span class='st'>"inherit"</span>, <span class='st'>"inherit"</span>, copyShapes <span class='op'>=</span> <span class='cn'>TRUE</span>, parent <span class='op'>=</span> <span class='va'>root</span><span class='op'>)</span>
<span class='fu'><a href='planes3d.html'>clipplanes3d</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span>

<span class='fu'>newSubscene3d</span><span class='op'>(</span><span class='st'>"inherit"</span>, <span class='st'>"inherit"</span>, <span class='st'>"inherit"</span>, copyShapes <span class='op'>=</span> <span class='cn'>TRUE</span>, parent <span class='op'>=</span> <span class='va'>root</span><span class='op'>)</span>
<span class='fu'><a href='planes3d.html'>clipplanes3d</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span>

<span class='co'># Now delete the objects from the root subscene, to reveal the clipping planes</span>
<span class='fu'>useSubscene3d</span><span class='op'>(</span><span class='va'>root</span><span class='op'>)</span>
<span class='fu'>delFromSubscene3d</span><span class='op'>(</span><span class='va'>obj</span><span class='op'>)</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/dmurdoch'>Duncan Murdoch</a>, <a href='http://neoscientists.org/~plex/'>Daniel Adler</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


